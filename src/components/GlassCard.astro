---
/**
 * 建筑风格毛玻璃卡片组件
 * 高级感、精致动效、几何元素
 */

interface Props {
	children: any;
	class?: string;
	delay?: number;
	hover?: boolean;
}

const {
	children,
	class: className = '',
	delay = 0,
	hover = true
} = Astro.props;
---

<div
	class:list={['glass-card', className, { 'hover-enabled': hover }]}
	style={`--delay: ${delay}ms`}
>
	<div class="glass-background">
		<div class="glass-noise"></div>
		<div class="glass-gradient"></div>
	</div>
	<div class="glass-border"></div>
	<div class="card-content" data-content="true">
		<slot />
	</div>
	<div class="corner-markers">
		<span class="marker marker-tl"></span>
		<span class="marker marker-tr"></span>
		<span class="marker marker-bl"></span>
		<span class="marker marker-br"></span>
	</div>
</div>

<style>
	.glass-card {
		position: relative;
		background: rgba(255, 255, 255, 0.03);
		border-radius: 2px;
		overflow: hidden;
		backdrop-filter: blur(20px);
		-webkit-backdrop-filter: blur(20px);
		animation: cardFadeIn 0.6s ease-out backwards;
		animation-delay: var(--delay);
	}

	@keyframes cardFadeIn {
		from {
			opacity: 0;
			transform: translateY(20px);
		}
		to {
			opacity: 1;
			transform: translateY(0);
		}
	}

	.glass-background {
		position: absolute;
		top: 0;
		left: 0;
		right: 0;
		bottom: 0;
		z-index: 0;
		pointer-events: none;
	}

	.glass-noise {
		position: absolute;
		top: 0;
		left: 0;
		right: 0;
		bottom: 0;
		opacity: 0.03;
		pointer-events: none;
		background-image: url('/noise.svg'); /* 使用外部文件，避免内联解码开销 */
		background-size: 200px 200px;
	}

	.glass-gradient {
		position: absolute;
		top: 0;
		left: 0;
		right: 0;
		bottom: 0;
		pointer-events: none;
		background: linear-gradient(
			135deg,
			rgba(255, 255, 255, 0.08) 0%,
			rgba(255, 255, 255, 0.04) 50%,
			rgba(255, 255, 255, 0.08) 100%
		);
	}

	.glass-border {
		position: absolute;
		top: 0;
		left: 0;
		right: 0;
		bottom: 0;
		border: 1px solid rgba(255, 255, 255, 0.08);
		border-radius: 2px;
		pointer-events: none;
		z-index: 1;
	}

	.card-content {
		position: relative;
		z-index: 2;
		padding: 2em;
	}

	.hover-enabled {
		transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
	}

	.hover-enabled:hover {
		transform: translateY(-4px);
		background: rgba(255, 255, 255, 0.05);
		border-color: rgba(255, 255, 255, 0.15);
		box-shadow:
			0 20px 40px rgba(0, 0, 0, 0.4),
			0 0 80px rgba(255, 255, 255, 0.03);
	}

	.hover-enabled:hover .glass-border {
		border-color: rgba(255, 255, 255, 0.15);
	}

	/* Corner Markers */
	.corner-markers {
		position: absolute;
		top: 0;
		left: 0;
		right: 0;
		bottom: 0;
		pointer-events: none;
		z-index: 3;
		opacity: 0;
		transition: opacity 0.3s ease;
	}

	.hover-enabled:hover .corner-markers {
		opacity: 1;
	}

	.marker {
		position: absolute;
		width: 8px;
		height: 8px;
		border-color: rgba(255, 255, 255, 0.3);
		border-style: solid;
		border-width: 0;
		transition: all 0.3s ease;
	}

	.marker-tl {
		top: 0.5em;
		left: 0.5em;
		border-top-width: 1px;
		border-left-width: 1px;
	}

	.marker-tr {
		top: 0.5em;
		right: 0.5em;
		border-top-width: 1px;
		border-right-width: 1px;
	}

	.marker-bl {
		bottom: 0.5em;
		left: 0.5em;
		border-bottom-width: 1px;
		border-left-width: 1px;
	}

	.marker-br {
		bottom: 0.5em;
		right: 0.5em;
		border-bottom-width: 1px;
		border-right-width: 1px;
	}

	.hover-enabled:hover .marker {
		width: 12px;
		height: 12px;
		border-color: rgba(255, 255, 255, 0.5);
	}

	/* Inner Glow */
	.glass-card::before {
		content: '';
		position: absolute;
		top: 0;
		left: 0;
		right: 0;
		height: 1px;
		background: linear-gradient(
			90deg,
			transparent 0%,
			rgba(255, 255, 255, 0.1) 50%,
			transparent 100%
		);
		z-index: 4;
		opacity: 0;
		transition: opacity 0.3s ease;
	}

	.hover-enabled:hover::before {
		opacity: 1;
	}
</style>
